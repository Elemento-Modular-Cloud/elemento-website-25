!function(){"use strict";console.log("Landing page loader script loaded");const e={};function o(e,o){return console.log("replaceVariables called with data:",o),e.replace(/\{\{([^}]+)\}\}/g,(e,n)=>{const t=n.trim().split(".");let i=o;console.log(`Processing variable: ${e}, path: ${n}, keys:`,t);for(const o of t){if(!i||"object"!=typeof i||!(o in i))return console.log(`Key ${o} not found in:`,i),e;i=i[o],console.log(`Found key ${o}, value:`,i)}return console.log(`Final value for ${e}:`,i),void 0!==i?i:e})}function n(e,n,t="item"){if(!Array.isArray(n)||0===n.length)return"";const i=new RegExp(`\x3c!-- repeat:${t} --\x3e([\\s\\S]*?)\x3c!-- endrepeat:${t} --\x3e`,"g");return e.replace(i,(e,i)=>n.map(e=>o(i,{[t]:e})).join(""))}async function t(t,i){let a=await async function(o){if(e[o])return console.log(`Using cached component: ${o}`),e[o];const n=`components/${o}.html`;console.log(`Fetching component: ${n}`);try{const t=await fetch(n);if(!t.ok)throw new Error(`Failed to load component: ${o} (${t.status})`);const i=await t.text();return e[o]=i,console.log(`Successfully loaded component: ${o}`),i}catch(e){return console.error(`Error loading component ${o}:`,e),`<div class="component-error">Failed to load ${o}</div>`}}(t);console.log(`Template for ${t}:`,a.substring(0,200)+"...");let r=0;if(i.items&&Array.isArray(i.items)?(r=i.items.length,a=n(a,i.items,"item")):i.item&&Array.isArray(i.item)?(r=i.item.length,a=n(a,i.item,"item")):Array.isArray(i)?(r=i.length,a=n(a,i,"item")):console.log(`No array processing needed for ${t}`),r>0){let e;e=r<=2||4===r?"grid-2":"grid-3",i.gridClass=e}return a=o(a,i),console.log(`Final rendered template for ${t}:`,a.substring(0,200)+"..."),a}async function i(){if(console.log("Landing page loader initializing..."),void 0===window.pageConfig)return void console.error("window.pageConfig not found. Please define pageConfig before loading landing-page-loader.js");console.log("pageConfig found:",window.pageConfig),console.log("Available pageConfig keys:",Object.keys(window.pageConfig));const e=document.querySelectorAll("[data-component]");console.log(`Found ${e.length} components to load:`,Array.from(e).map(e=>e.getAttribute("data-component")));const o=Array.from(e).map(e=>e.getAttribute("data-component")),n=o.filter((e,n)=>o.indexOf(e)!==n);n.length>0&&console.warn("Duplicate components found:",n);const i=Array.from(e).map(async e=>{const o=e.getAttribute("data-component"),n=e.id;let i=window.pageConfig[n]||window.pageConfig[o]||window.pageConfig[n.replace("-section","")]||window.pageConfig[n.replace("-","")]||{};"hero-section"===n&&window.pageConfig.hero?i=window.pageConfig.hero:"pain-points"===n&&window.pageConfig.painPoints?i=window.pageConfig.painPoints:"solution"===n&&window.pageConfig.solution?i=window.pageConfig.solution:"features"===n&&window.pageConfig.features?i=window.pageConfig.features:"use-case"===n&&window.pageConfig.useCase?i=window.pageConfig.useCase:"code-example"===n&&window.pageConfig.codeExample?i=window.pageConfig.codeExample:"stats"===n&&window.pageConfig.stats?i=window.pageConfig.stats:"products"===n&&window.pageConfig.products?i=window.pageConfig.products:"faq"===n&&window.pageConfig.faq?i=window.pageConfig.faq:"cta-final"===n&&window.pageConfig.ctaFinal&&(i=window.pageConfig.ctaFinal),console.log(`Loading component: ${o} (id: ${n})`,i),console.log("Available pageConfig keys:",Object.keys(window.pageConfig));try{const n=await t(o,i);e.innerHTML=n,e.removeAttribute("data-component"),console.log(`Successfully loaded component: ${o}`)}catch(n){console.error(`Error rendering component ${o}:`,n),e.innerHTML='<div class="component-error">Error loading content</div>'}});await Promise.all(i),function(){document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",function(){const e=this.nextElementSibling,o=e.style.maxHeight;document.querySelectorAll(".faq-answer").forEach(e=>{e.style.maxHeight=null,e.previousElementSibling.classList.remove("active")}),o||(e.style.maxHeight=e.scrollHeight+"px",this.classList.add("active"))})});const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("visible")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".fade-in, .scroll-animate").forEach(o=>{e.observe(o)})}(),document.dispatchEvent(new CustomEvent("componentsLoaded"))}window.formatNumber=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},window.escapeHtml=function(e){const o=document.createElement("div");return o.textContent=e,o.innerHTML},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}();