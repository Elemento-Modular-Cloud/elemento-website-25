function getCookiePreference(){try{const e=localStorage.getItem("elemento_cookie_preference");return e?JSON.parse(e):null}catch(e){return console.error("Failed to get cookie preference:",e),null}}function setupIubendaClickInterception(){function e(e,t=Date.now()){console.log("Saving cookie preference",e);const n={choice:e,timestamp:t,date:new Date(t).toISOString()};try{localStorage.setItem("elemento_cookie_preference",JSON.stringify(n)),console.log("Cookie preference saved:",n),sessionStorage.setItem("elemento_cookie_preference",JSON.stringify(n));const e=new CustomEvent("cookiePreferenceChanged",{detail:n});document.dispatchEvent(e)}catch(e){console.error("Failed to save cookie preference:",e)}}function t(){const t=setInterval(()=>{const n=document.querySelector("#iubenda-cs-banner");if(n){const o={acceptBtn:".iubenda-cs-accept-btn, [data-iubenda-cs-accept], button[data-iubenda-cs-accept]",rejectBtn:".iubenda-cs-reject-btn, [data-iubenda-cs-reject], button[data-iubenda-cs-reject]",customizeBtn:".iubenda-cs-customize-btn, [data-iubenda-cs-customize], button[data-iubenda-cs-customize]",privacyLink:'.iubenda-privacy-policy-link, a[href*="privacy"], [data-iubenda-privacy]',cookiePolicyLink:'.iubenda-cs-cookie-policy-lnk, a[href*="cookie"], [data-iubenda-cookie]',vendorListLink:'.iubenda-vendor-list-link, a[href*="vendor"], [data-iubenda-vendor]',advertisingPrefsLink:'.iubenda-advertising-preferences-link, a[href*="advertising"], [data-iubenda-advertising]',privacyChoicesLink:'.iubenda-cs-preferences-link, a[href*="preferences"], [data-iubenda-preferences]'},r=n.querySelector(o.acceptBtn);r&&r.addEventListener("click",function(t){e("accepted")});const i=n.querySelector(o.rejectBtn);i&&i.addEventListener("click",function(t){e("rejected")});const c=n.querySelector(o.customizeBtn);c&&c.addEventListener("click",function(t){e("customized")});const s=n.querySelector(o.privacyLink);s&&s.addEventListener("click",function(e){});const a=n.querySelector(o.cookiePolicyLink);a&&a.addEventListener("click",function(e){});const d=n.querySelector(o.vendorListLink);d&&d.addEventListener("click",function(e){});const l=n.querySelector(o.advertisingPrefsLink);l&&l.addEventListener("click",function(e){});const u=n.querySelector(o.privacyChoicesLink);u&&u.addEventListener("click",function(e){}),n.addEventListener("click",function(e){}),clearInterval(t)}},100);setTimeout(()=>{clearInterval(t)},1e4)}console.log("Setting up iubenda click interception"),t(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.addEventListener("load",t);new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{1===e.nodeType&&("iubenda-cs-banner"===e.id||e.querySelector&&e.querySelector("#iubenda-cs-banner"))&&(console.log("New iubenda banner detected"),setTimeout(()=>t(),100))})})}).observe(document.body,{childList:!0,subtree:!0}),window.elementoCookieUtils={saveCookiePreference:e,getCookiePreference:getCookiePreference}}function handleCookiePreference(){const e=getCookiePreference();console.log("cookie preference",e);const t=setInterval(()=>{const n=document.querySelector("#iubenda-cs-banner");if(console.log("iubenda banner",n),e){const o={acceptBtn:".iubenda-cs-accept-btn, [data-iubenda-cs-accept], button[data-iubenda-cs-accept]",rejectBtn:".iubenda-cs-reject-btn, [data-iubenda-cs-reject], button[data-iubenda-cs-reject]",customizeBtn:".iubenda-cs-customize-btn, [data-iubenda-cs-customize], button[data-iubenda-cs-customize]"};let r=null;try{"accepted"===e.choice||"customized"===e.choice?r=n.querySelector(o.acceptBtn):"rejected"===e.choice&&(r=n.querySelector(o.rejectBtn)),r&&(r.click(),console.log(`Automatically clicked ${e.choice} button based on stored preference`))}catch(e){return void clearInterval(t)}}},100);setTimeout(()=>{clearInterval(t)},1e4)}class ElementoWebsite{constructor(){this.isScrolled=!1,this.init()}init(){this.setupNavigation(),this.setupScrollEffects(),this.setupAnimations(),this.setupForms(),this.setupKeyboardShortcuts(),this.setupPerformanceOptimizations(),this.setupAccessibility(),this.setupiubendaScripts()}setupNavigation(){const e=document.querySelector(".navbar");document.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",t=>{const n=e.getAttribute("href");if(n&&n.startsWith("#")&&n.length>1){t.preventDefault();const e=document.querySelector(n);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}})}),window.addEventListener("scroll",()=>{const t=window.scrollY>50;t!==this.isScrolled&&(this.isScrolled=t,e.classList.toggle("scrolled",t))}),this.updateActiveNavLink(),window.addEventListener("scroll",()=>this.updateActiveNavLink())}updateActiveNavLink(){const e=document.querySelectorAll("section[id]"),t=document.querySelectorAll(".nav-link");let n="";Array.from(e).map(e=>({id:e.getAttribute("id"),top:e.offsetTop,height:e.clientHeight})).forEach(e=>{window.scrollY>=e.top-200&&(n=e.id)}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${n}`&&e.classList.add("active")})}setupScrollEffects(){let e=window.scrollY,t=!1;const n=()=>{const e=window.scrollY,n=window.innerHeight;document.documentElement.scrollHeight;window.innerWidth<=1e3&&this.updateMobileScrollEffects(e,n),t=!1};window.addEventListener("scroll",()=>{e=window.scrollY,t||(requestAnimationFrame(n),t=!0)});const o=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("animate")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".scroll-animate").forEach(e=>{o.observe(e)})}updateMobileScrollEffects(e,t){const n=document.querySelector(".hero-product-icon"),o=document.querySelector(".hero-blur");if(!o)return;const r=0*t,i=1*t,c=Math.max(0,Math.min(1,(e-r)/(i-r)));n&&(n.style.transform=`translate(-50%, calc(-50% - ${e}px * .9))`);const s=Math.max(.3,1-.7*c);o.style.opacity=s}setupAnimations(){document.querySelectorAll(".fade-in").forEach((e,t)=>{setTimeout(()=>{e.classList.add("visible")},100*t)}),document.querySelectorAll(".card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-8px)"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0)"})}),document.querySelectorAll(".btn").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-2px)"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0)"})})}setupForms(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",t=>{t.preventDefault(),this.handleFormSubmit(e)});e.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("blur",()=>this.validateField(e)),e.addEventListener("input",()=>this.clearFieldError(e))})})}handleFormSubmit(e){new FormData(e);const t=e.querySelector('button[type="submit"]'),n=t.textContent;t.disabled=!0,t.textContent="Sending...",setTimeout(()=>{t.disabled=!1,t.textContent=n,e.reset()},2e3)}validateField(e){const t=e.value.trim(),n=e.name||e.id;return this.clearFieldError(e),e.hasAttribute("required")&&!t?(this.showFieldError(e,`${n} is required`),!1):!("email"===e.type&&t&&!this.isValidEmail(t))||(this.showFieldError(e,"Please enter a valid email address"),!1)}showFieldError(e,t){const n=document.createElement("div");n.className="field-error",n.textContent=t,n.style.color="var(--red)",n.style.fontSize="0.875rem",n.style.marginTop="0.25rem",e.parentNode.appendChild(n),e.style.borderColor="var(--red)"}clearFieldError(e){const t=e.parentNode.querySelector(".field-error");t&&t.remove(),e.style.borderColor=""}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}setupKeyboardShortcuts(){document.addEventListener("keydown",e=>{})}setupPerformanceOptimizations(){const e=document.querySelectorAll("img[data-src]"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.classList.remove("lazy"),t.unobserve(n)}})});let n;e.forEach(e=>t.observe(e)),window.addEventListener("scroll",()=>{n&&clearTimeout(n),n=setTimeout(()=>{this.updateActiveNavLink()},16)})}setupAccessibility(){const e=document.createElement("a");e.href="#main-content",e.textContent="Skip to main content",e.className="skip-link",e.style.cssText="\n            position: absolute;\n            top: -40px;\n            left: 6px;\n            background: var(--primary-color);\n            color: var(--button-text-color);\n            padding: 8px;\n            text-decoration: none;\n            border-radius: 4px;\n            z-index: 10000;\n        ",e.addEventListener("focus",()=>{e.style.top="6px"}),e.addEventListener("blur",()=>{e.style.top="-40px"}),document.body.insertBefore(e,document.body.firstChild),document.querySelectorAll(".btn").forEach(e=>{e.getAttribute("aria-label")||e.setAttribute("aria-label",e.textContent.trim())}),document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")})}setupiubendaScripts(){if(document.querySelector('script[src*="iubenda"]'))return;const e=document.createElement("script");e.type="text/javascript",e.src="//embeds.iubenda.com/widgets/b519d485-6db6-11ee-8bfc-5ad8d8c564c0.js",document.head.insertBefore(e,document.head.firstChild);const t=getCookiePreference();console.log("preference",t);let n=!1;if(t){const e=new Date(t.timestamp);n=new Date-e>31536e6,console.log("isExpired",n)}if(getCookiePreference()&&!n){handleCookiePreference();const e="\n                html {\n                    overflow-y: visible !important;\n                }\n                #iubenda-cs-banner {\n                    opacity: 0 !important;\n                    visibility: hidden !important;\n                    pointer-events: none !important;\n                }\n            ",t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}else setupIubendaClickInterception();const o=document.createElement("script");o.type="text/javascript";const r=document.currentScript||document.querySelector('script[src*="main.js"]'),i=(r?r.src:"").includes("../js/main.js"),c=window.location.pathname.includes("solutions/"),s=window.location.pathname.includes("technology/");let a;a=i||c||s?"../js/iubenda_fix.js":"js/iubenda_fix.js",o.src=a,document.head.appendChild(o)}showToast(e,t="info",n=5e3){document.querySelectorAll(".toast").forEach(e=>e.remove());const o=document.createElement("div");o.className=`toast ${t}`,o.innerHTML=`\n            <div class="toast-content">\n                <span class="toast-message">${e}</span>\n                <button class="toast-close" aria-label="Close notification">×</button>\n            </div>\n        `,o.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: var(--glassmorphism-background);\n            backdrop-filter: blur(20px);\n            border: 1px solid var(--glassmorphism-border);\n            border-radius: var(--card-border-radius);\n            padding: var(--space-lg);\n            box-shadow: var(--glassmorphism-shadow);\n            z-index: 1001;\n            transform: translateX(100%);\n            transition: transform 0.3s ease;\n            max-width: 400px;\n            color: var(--text-color);\n        ",document.body.appendChild(o),setTimeout(()=>{o.style.transform="translateX(0)"},100);o.querySelector(".toast-close").addEventListener("click",()=>{this.hideToast(o)}),setTimeout(()=>{this.hideToast(o)},n)}hideToast(e){e.style.transform="translateX(100%)",setTimeout(()=>{e.parentNode&&e.remove()},300)}debounce(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}throttle(e,t){let n;return function(){const o=arguments,r=this;n||(e.apply(r,o),n=!0,setTimeout(()=>n=!1,t))}}async injectSVGDiagram(e,t=null){try{const n="string"==typeof e?document.querySelector(e):e;if(!n)return void console.error(`Container not found: ${e}`);const o=t||n.getAttribute("src");if(!o)return void console.error(`No SVG path provided and no src attribute found on ${e}`);const r=await fetch(o);if(!r.ok)throw new Error(`Failed to fetch SVG: ${r.status} ${r.statusText}`);const i=await r.text(),c=new DOMParser,s=c.parseFromString(i,"image/svg+xml").querySelector("svg");if(!s)throw new Error("No SVG element found in the content");const a=parseFloat(s.getAttribute("width")||"0"),d=parseFloat(s.getAttribute("height")||"0"),l=s.querySelector("g[transform]");let u=null;if(l){const e=l.getAttribute("transform").match(/translate\(([^,]+),\s*([^)]+)\)/);if(e){const t=parseFloat(e[1]),n=parseFloat(e[2]),o=a+Math.abs(t);u=`0 0 ${o} ${d+Math.abs(n)}`}}u||(u=`0 0 ${a} ${d}`);let m=i;m=m.replace(/viewBox="[^"]*"/g,""),m=m.replace(/<svg([^>]*)>/,`<svg$1 viewBox="${u}" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%;">`),requestAnimationFrame(()=>{n.innerHTML=m}),console.log(`SVG injected successfully into ${e} from ${o} with viewBox: ${u}`)}catch(t){console.error("Error injecting SVG:",t);const n=document.querySelector(e);n&&requestAnimationFrame(()=>{n.innerHTML='\n                        <div style="text-align: center; padding: 2rem; color: var(--text-muted);">\n                            <p>Unable to load diagram</p>\n                            <small>Please refresh the page to try again</small>\n                        </div>\n                    '})}}setupSVGDiagrams(){document.querySelectorAll(".diagram-svg").forEach(e=>{const t=e.getAttribute("src");t?this.injectSVGDiagram(e,t):console.error("No src attribute found on diagram-svg container at:",e)})}}document.addEventListener("DOMContentLoaded",()=>{window.elementoWebsite=new ElementoWebsite,window.elementoWebsite&&window.elementoWebsite.setupSVGDiagrams()});